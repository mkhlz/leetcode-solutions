<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Two Sum Algorithm Visualizer</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 20px;
      }
      #array-container {
        display: flex;
        gap: 10px;
        margin-bottom: 20px;
      }
      .num-box {
        width: 50px;
        height: 50px;
        border: 2px solid #333;
        display: flex;
        justify-content: center;
        align-items: center;
        font-weight: bold;
        font-size: 18px;
        user-select: none;
        border-radius: 6px;
      }
      .checking {
        border-color: orange;
        background-color: #ffe0b3;
      }
      .found {
        border-color: green;
        background-color: #b3ffb3;
      }
      .not-found {
        border-color: red;
        background-color: #ffb3b3;
      }
      button {
        margin-right: 10px;
        margin-top: 10px;
        padding: 8px 16px;
        font-size: 16px;
      }
      input[type="number"] {
        width: 80px;
        font-size: 16px;
        padding: 6px;
        margin-right: 10px;
      }
      #status {
        margin-top: 15px;
        font-size: 18px;
        font-weight: bold;
      }

      /* Add spacing below input/button container */
      #controls-container {
        margin-bottom: 30px; /* space below input and randomize */
      }

      /* Add spacing above the array container */
      #array-container {
        margin-top: 10px; /* space above array */
      }
    </style>
  </head>
  <body>
    <h1>Two Sum Algorithm Visualizer</h1>

    <div id="controls-container">
      <label for="target-sum">Target Sum: </label>
      <input type="number" id="target-sum" value="9" />
      <button id="randomize-btn">Randomize Array</button>
    </div>

    <div id="array-container"></div>

    <div>
      <button id="start-btn">Start</button>
      <button id="stop-btn" disabled>Stop</button>
      <button id="step-btn">Step</button>
      <button id="reset-btn">Reset</button>
    </div>

    <div id="status"></div>

    <script>
      // Core variables
      let arr = [];
      const arraySize = 8;
      let i = 0; // outer pointer
      let j = 1; // inner pointer
      let intervalId = null;
      let running = false;
      let foundIndices = null; // Store result pair indices

      const container = document.getElementById("array-container");
      const targetInput = document.getElementById("target-sum");
      const randomizeBtn = document.getElementById("randomize-btn");
      const startBtn = document.getElementById("start-btn");
      const stopBtn = document.getElementById("stop-btn");
      const stepBtn = document.getElementById("step-btn");
      const resetBtn = document.getElementById("reset-btn");
      const statusDiv = document.getElementById("status");

      // Generate random array with numbers between 1 and 20
      function generateRandomArray() {
        arr = [];
        for (let k = 0; k < arraySize; k++) {
          arr.push(Math.floor(Math.random() * 20) + 1);
        }
      }

      // Render the array boxes
      function renderArray() {
        container.innerHTML = "";
        arr.forEach((num, index) => {
          const box = document.createElement("div");
          box.className = "num-box";
          box.id = "box-" + index;
          box.textContent = num;
          container.appendChild(box);
        });
      }

      // Reset algorithm state and UI
      function reset() {
        clearInterval(intervalId);
        intervalId = null;
        running = false;
        i = 0;
        j = 1;
        foundIndices = null;
        statusDiv.textContent = "";
        stopBtn.disabled = true;
        startBtn.disabled = false;
        stepBtn.disabled = false;
        renderArray();
      }

      // Highlight the currently checked pair
      function highlightChecking(iIndex, jIndex) {
        // Clear all highlights first
        arr.forEach((_, idx) => {
          const box = document.getElementById("box-" + idx);
          box.classList.remove("checking", "found", "not-found");
        });

        // If found, highlight found
        if (foundIndices) {
          const box1 = document.getElementById("box-" + foundIndices[0]);
          const box2 = document.getElementById("box-" + foundIndices[1]);
          box1.classList.add("found");
          box2.classList.add("found");
          return;
        }

        // Highlight current pair being checked
        const box1 = document.getElementById("box-" + iIndex);
        const box2 = document.getElementById("box-" + jIndex);
        box1.classList.add("checking");
        box2.classList.add("checking");
      }

      // One step of the two sum check (brute force)
      function step() {
        if (foundIndices) {
          // Already found pair, stop stepping
          return;
        }
        if (i >= arr.length - 1) {
          // No pair found
          statusDiv.textContent = "No two sum pair found.";
          highlightChecking(-1, -1);
          running = false;
          clearInterval(intervalId);
          intervalId = null;
          stopBtn.disabled = true;
          startBtn.disabled = true;
          stepBtn.disabled = true;
          return;
        }

        highlightChecking(i, j);

        const sum = arr[i] + arr[j];
        const target = Number(targetInput.value);

        if (sum === target) {
          foundIndices = [i, j];
          statusDiv.textContent = `Found pair: indices [${i}, ${j}], values (${arr[i]}, ${arr[j]})`;
          highlightChecking(i, j);
          running = false;
          clearInterval(intervalId);
          intervalId = null;
          stopBtn.disabled = true;
          startBtn.disabled = true;
          stepBtn.disabled = true;
          return;
        } else {
          statusDiv.textContent = `Checking indices [${i}, ${j}]: sum = ${sum}`;
        }

        // Move to next pair
        j++;
        if (j >= arr.length) {
          i++;
          j = i + 1;
        }
      }

      // Start auto-running the animation
      function start() {
        if (running) return;
        running = true;
        startBtn.disabled = true;
        stopBtn.disabled = false;
        stepBtn.disabled = true;

        intervalId = setInterval(() => {
          step();
          if (!running) {
            clearInterval(intervalId);
            intervalId = null;
          }
        }, 1000); // 1 step per second
      }

      // Stop the animation
      function stop() {
        if (!running) return;
        running = false;
        startBtn.disabled = false;
        stopBtn.disabled = true;
        stepBtn.disabled = false;

        clearInterval(intervalId);
        intervalId = null;
      }

      // Initialize app with random array
      function init() {
        generateRandomArray();
        renderArray();
        reset();
      }

      // Event listeners
      randomizeBtn.addEventListener("click", () => {
        generateRandomArray();
        reset();
      });

      startBtn.addEventListener("click", () => {
        start();
      });

      stopBtn.addEventListener("click", () => {
        stop();
      });

      stepBtn.addEventListener("click", () => {
        if (!running) step();
      });

      resetBtn.addEventListener("click", () => {
        reset();
      });

      targetInput.addEventListener("change", () => {
        reset();
      });

      // Run on load
      init();
    </script>
  </body>
</html>
